## 문자열의 기본

### 문자열이란?

프로그램에서 문자의 나열을 나타낸 것이 문자열(string)이다. 이때 문자의 나열은 어떤 문자가 항상 있어야 하는 것은 아니다. 문자가 하나만 있어도 좋고, 비어 있어도 상관없다. 빈 문자열도 문자열이다.



### 문자열 리터럴

C에서는 문자의 나열을 2개의 큰 따옴표로 묶은 것을 문자열 리터럴(string literal)이라고 한다. 문자열 안의 문자는 메모리 공간에 연속을 배치된다.

![](./Figure/문자열1.JPG)

위 그림에서 볼 수 있듯이 컴퓨터에서 문자열 리터럴의 끝을 나타내기 위해 널 문자(null character)를 자동으로 추가한다. 널 문자 내부는 컴퓨터 환경이나 문자 코드에 관계없이 모든 비트의 값이 0이다. 

파이썬에서 문자열 리터럴은 따옴표로 묶은 일련의 문자이다. 문자열에 대해 단일, 이중 또는 삼중 따옴표를 모두 사용할 수 있다. 문자 리터럴은 큰 혹은 작은 따옴표로 묶인 단일 문자이다. 

![](./Figure/문자열2.JPG)

(r 문자는 raw string으로 백슬래시 문자를 해석하지 않고 남겨두기 때문에 정규 표현식과 같은 곳에 유용하다.)

[WikiDocs - 03. 변수, 상수 그리고 리터럴](https://wikidocs.net/20562)

아래는 파이썬 3.7을 기준으로 문자열 리터럴을 어떻게 구현했는가에 대한 글이다.

[Nephtyw'S Programming Stash -  파이썬의 효과적인 메모리 재활용 방법 - Interning](https://nephtyws.github.io/python/interning/)



#### 문자열 리터럴의 특징

C에서 문자열 리터럴의 자료형은

- 문자열 리터럴의 자료형 : 문자열 리터럴의 자료형은 char형 배열이다. 그러나 문자열 리터럴의 표현식을 평가하여 얻는 자료형은 char *형이고, 그 값은 첫 번째 문자에 대한 포인터이다. 
- 문자열 리터럴의 메모리 영역 기간 : 문자열 리터럴의 메모리 영역 기간은 정적 메모리 영역의 기간과 같다. 그러므로 프로그램 시작부터 끝까지 메모리 영역이 유지된다.
- 같은 문자열 리터럴이 여러 개 있는 경우 컴퓨터에서 처리하는 방법 : 같은 문자열 리터럴이 여러 개 있는 경우에는 이를 각각 다른 메모리 영역에 넣어두는 컴퓨팅 환경도 있고 같은 영역에 넣어두고 공유하는 컴퓨터 환경도 있다.
- 상수의 성질을 갖는 문자열 리터럴 : 문자열 리터럴은 변수가 아니라 상수의 성질을 가지고 있다. 즉, 문자열 리터럴이 저장된 메모리 영역에 값을 대입할 수 없다. 

Python에서 문자열 리터럴은

- 문자열 리터럴의 자료형 : 문자열 리터럴의 자료형은 str 클래스이다. char형은 따로 존재하지 않는다. 

  ![](./Figure/문자열11.JPG)

  또 chr, ord라는 내장함수가 아스키 코드 변환과 관련이 있다.

  ![](./Figure/문자열12.JPG)

  문자열 리터럴의 레퍼런스와 문자열 리터럴의 첫 번째 문자의 레퍼런스는 관련이 없다.

  ![](./Figure/문자열10.JPG)

- 같은 문자열 리터럴일 경우 레퍼런스가 똑같은 메모리 영역을 참조한다. 즉, 메모리 영역을 재활용한다. 

  ![](./Figure/문자열13.JPG)

- 문자열 리터럴이 상수의 성질을 가지므로 요소의 값을 바꾸거나 새로운 요소를 추가할 수 없다.

  ![](./Figure/문자열14.JPG)

  

### 배열에 문자열 저장하기

![](./Figure/문자열3.JPG)

요소의 자료형이 char형이고 요소의 개수가 10인 배열 st의 요소에 문자열을 구성할 문자를 하나씩 순서대로 대입한다. 대입한 후 배열 st의 모습은 위와 같다. C 언어에서 널 문자는 문자열의 끝을 나타낸다. 따라서 5번째 이후에 어떤 문자를 대입해도 ABCD로 출력된다. 

![](./Figure/문자열15.JPG)

파이썬에서는 각 요소가 str 타입인 리스트를 str 클래스의 내장 메소드인 join을 호출하고 인자로 넘겨서 새로운 str 타입 객체를 생성할 수 있다. 이때 따옴표 안에 들어가는 글자로 리스트의 각 요소 사이를 채울 수 있다.



#### 문자열 초기화

문자열을 선언하면서 동시에 초기화할 수도 있다. 

![](./Figure/문자열4.JPG)

주의할 점은 초기화할 때 사용한 코드는 초기화에서만 사용해야 한다는 점이다. 다음과 같은 코드는 실행되지 않는다. 

![](./Figure/문자열5.JPG)

요소의 개수를 생략하고 문자열을 선언하면 초기화할 때 입력한 문자열의 요소 개수가 배열의 요소 개수가 된다. 예를 다음 배열 st의 요소 개수는 \\0까지 5개이다.

- char st[] = "ABCD";

파이썬에서는 변수 선언이나 초기화라는 개념이 존재하지 않고 할당 혹은 네이밍이라는 개념만 존재한다.



#### printf 함수 사용해 문자열 출력하기

문자열 나타내는 형식 문자열(%s)의 's'는 string에서 따왔다. scanf 함수를 사용하여 읽어 들일 때도 형식 문자열(%s)을 사용한다.

![](./Figure/문자열6.JPG)

파이썬에서는 문자열 출력하는 방법으로 3가지 정도 방법이 존재한다.

![](./Figure/문자열16.JPG)

[lcat - Pros and cons of Python’s f-strings literal](https://lcat.dev/2019/05/07/pros-and-cons-of-pythons-f-strings-literal/)

이중에서 PEP 498에서 채택된 Literal String Interpolation, 줄여서 f-string을 쓰는 것이 권장되는데 가독성이 더 좋을뿐만 아니라 속도도 훨씬 빠르다. 다만 옛 파이썬 버전의 프로그램과는 호환이 되지 않는다. 



### 포인터와 문자열

![](./Figure/문자열7.JPG)

위에서 선언한 포인터 pt는 초기화 요소로 문자열 "12345"를 준다. 문자열 리터럴을 평가하여 얻는 값은 그 문자열 리터럴의 첫 번째 문자에 대한 포인터이므로 pt는 "12345"가 들어 있는 메모리 영역의 첫 번째 문자 '1'이 들어 있는 영역의 주소값을 가리키며 초기화 된다. 문자열 리터럴 요소에 접근할 때는 pt[i]와 같이 인덱스를 이용해 접근이 가능하다. 

![](./Figure/문자열8.JPG)

배열에 저장한 문자열은 6바이트의 메모리 영역을 갖는다(\\0까지 sizeof(char) * 문자갯수). 하지만 포인터로 표현한 문자열은 문자열 리터럴을 저장하기 위한 영역 외에도 pt가 갖는 메모리 영역이 더 필요하다. 

 ![](./Figure/문자열9.JPG)

위의 그림은 문자열 리터럴을 가리키는 두 포인터의 값을 서로 교환하는 과정이다.  각각의 포인터가 가리키는 값을 바꾸면 포인터로 표현하는 문자열을 바꿀 수 있다. 

파이썬에서는 다음과 같이 Pythonic하게 swap이 가능하다.

![](./Figure/문자열17.JPG)